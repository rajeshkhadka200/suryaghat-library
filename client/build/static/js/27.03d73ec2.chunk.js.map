{"version":3,"sources":["Styles/ProfileCSS/Login.module.css","Pages/Login.js"],"names":["module","exports","Login","useState","loading","setloading","window","scrollTo","document","title","authID","Cookies","get","history","useHistory","provider_google","firebase","auth","GoogleAuthProvider","provider","a","signInWithPopup","then","result","getApi","post","name","user","displayName","email","imageUrl","photoURL","googleId","uid","res","status","set","expires","randomNum","Math","random","setTimeout","toast","success","push","location","reload","catch","error","code","message","to","className","LoginStyle","loginWrapper","LoginRight","loginBox","src","serverBaseURI","alt","onClick","googleSignin","style","cursor","class"],"mappings":"sFACAA,EAAOC,QAAU,CAAC,aAAe,4BAA4B,SAAW,wBAAwB,UAAY,2B,wMC8J7FC,UAhJD,WACZ,MAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACAC,OAAOC,SAAS,EAAG,GACnBC,SAASC,MAAQ,6BACjB,IAAMC,EAASC,IAAQC,IAAI,gBACrBC,EAAUC,cAyDZC,EAAkB,IAAIC,IAASC,KAAKC,mBA9DtB,4CAiElB,WAA4BC,GAA5B,SAAAC,EAAA,sEACQJ,IACHC,OACAI,gBAAgBF,GAChBG,KAHG,uCAGE,WAAgBC,GAAhB,SAAAH,EAAA,sEACEI,IACHC,KAAK,qBAAsB,CAC1BC,KAAMH,EAAOI,KAAKC,YAClBC,MAAON,EAAOI,KAAKE,MACnBC,SAAUP,EAAOI,KAAKI,SACtBC,SAAUT,EAAOI,KAAKM,MAEvBX,MAAK,SAACY,GACL,GAAmB,MAAfA,EAAIC,OAAgB,CACtBxB,IAAQyB,IAAI,eAAgBb,EAAOI,KAAKM,IAAK,CAAEI,QAAS,IACxD,IAAMC,EAAYC,KAAKC,OAAO,KAAQ,KACtC7B,IAAQyB,IAAI,oBAAqBE,GACjC3B,IAAQyB,IAAI,yBAA0BE,EAAY,SAClDG,YAAW,WACTC,IAAMC,QAAQ,0BACd9B,EAAQ+B,KAAK,KACbtC,OAAOuC,SAASC,SAChBzC,GAAW,KACV,KAEL,GAAmB,MAAf6B,EAAIC,OAAgB,CACtB,IAAKzB,EAAQ,CACXgC,IAAMC,QAAQ,qBACdhC,IAAQyB,IAAI,eAAgBb,EAAOI,KAAKM,IAAK,CAAEI,QAAS,IACxD,IAAMC,EAAYC,KAAKC,OAAO,KAAQ,KACtC7B,IAAQyB,IAAI,oBAAqBE,GACjC3B,IAAQyB,IAAI,yBAA0BE,EAAY,SAEpDG,YAAW,WACTpC,GAAW,GACXC,OAAOuC,SAASC,SAChBjC,EAAQ+B,KAAK,OACZ,SAjCL,2CAHF,uDAwCHG,OAAM,SAAUC,GACCA,EAAMC,KACHD,EAAME,WA3C/B,4CAjEkB,sBAkHlB,OACE,qCACG9C,GAAW,cAAC,IAAD,IACZ,cAAC,IAAD,IACCM,EAAS,cAAC,IAAD,CAAUyC,GAAG,MAAS,GAChC,qBAAKC,UAAWC,IAAWC,aAA3B,SACE,qBAAKF,UAAWC,IAAWE,WAA3B,SACE,sBAAKH,UAAWC,IAAWG,SAA3B,UACE,8CACA,qBACEC,IAAG,UAAKC,IAAL,yCACHC,IAAI,SAEN,yBACEC,QAAS,YAhIH,oCAiIJC,CAAa9C,IAEf+C,MAAO,CAAEC,OAAQ,WAJnB,UAME,mBAAGC,MAAM,kBANX,kCAYN,cAAC,IAAD","file":"static/js/27.03d73ec2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginWrapper\":\"Login_loginWrapper__IfNs2\",\"loginBox\":\"Login_loginBox__1erqb\",\"LoginLeft\":\"Login_LoginLeft__K92s0\"};","import React, { useState } from \"react\";\r\nimport { useGoogleLogin } from \"react-google-login\";\r\n\r\nimport Cookies from \"js-cookie\";\r\nimport { Redirect } from \"react-router\";\r\nimport LoginStyle from \"../Styles/ProfileCSS/Login.module.css\";\r\nimport Footer from \"../Utilities/StaticContents/Footer\";\r\nimport Nav from \"../Components/Nav/Nav\";\r\nimport { toast } from \"react-toastify\";\r\nimport MainLoader from \"../Utilities/StaticContents/MainLoader\";\r\nimport { serverBaseURI } from \"../Utilities/file.config\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport firebase from \"firebase\";\r\nimport { getApi } from \"../services\";\r\n\r\nconst Login = () => {\r\n  const [loading, setloading] = useState(false);\r\n  window.scrollTo(0, 0);\r\n  document.title = \"SuryaGhat Library || Login\";\r\n  const authID = Cookies.get(\"__tcphbl30__\");\r\n  const history = useHistory();\r\n\r\n  // const clientId = process.env.REACT_APP_CLIENT_ID;\r\n  // const onSuccess = async (res) => {\r\n  //   setloading(true);\r\n  //   const { name, email, imageUrl, googleId } = res.profileObj;\r\n  //   await axios\r\n  //     .post(\"/hariBaba/api/auth\", {\r\n  //       name,\r\n  //       email,\r\n  //       imageUrl,\r\n  //       googleId,\r\n  //     })\r\n  //     .then((res) => {\r\n  //       if (res.status === 200) {\r\n  //         toast.success(\"Registered Sucessfully\");\r\n  //         Cookies.set(\"__tcphbl30__\", googleId, { expires: 7 });\r\n  //         const randomNum = Math.random(5000) + 5080;\r\n  //         Cookies.set(\"__cuser-_webuser_\", randomNum);\r\n  //         Cookies.set(\"___security-data.user_\", randomNum + 8489920);\r\n  //         //localStorage.setItem(\"model\", \"true\");\r\n\r\n  //         setTimeout(() => {\r\n  //           history.push(\"/\");\r\n  //           window.location.reload();\r\n  //           setloading(false);\r\n  //         }, 2000);\r\n  //       }\r\n  //       if (res.status === 202) {\r\n  //         if (!authID) {\r\n  //           toast.success(\"Login Successfull\");\r\n  //           Cookies.set(\"__tcphbl30__\", googleId, { expires: 7 });\r\n  //           const randomNum = Math.random(5000) + 5080;\r\n  //           Cookies.set(\"__cuser-_webuser_\", randomNum);\r\n  //           Cookies.set(\"___security-data.user_\", randomNum + 8489920);\r\n  //           //localStorage.setItem(\"model\", \"true\");\r\n  //         }\r\n  //         setTimeout(() => {\r\n  //           setloading(false);\r\n  //           history.push(\"/\");\r\n  //           window.location.reload();\r\n  //         }, 2000);\r\n  //       }\r\n  //     });\r\n  // };\r\n\r\n  // const onFailure = (res) => {\r\n  //   toast.error(\"Something went wrong\");\r\n  //   setloading(false);\r\n  // };\r\n\r\n  // const { signIn } = useGoogleLogin({\r\n  //   onSuccess,\r\n  //   clientId,\r\n  //   onFailure,\r\n  // });\r\n\r\n  var provider_google = new firebase.auth.GoogleAuthProvider();\r\n  //var provider_fb = new firebase.auth.FacebookAuthProvider();\r\n\r\n  async function googleSignin(provider) {\r\n    await firebase\r\n      .auth()\r\n      .signInWithPopup(provider)\r\n      .then(async function (result) {\r\n        await getApi\r\n          .post(\"/hariBaba/api/auth\", {\r\n            name: result.user.displayName,\r\n            email: result.user.email,\r\n            imageUrl: result.user.photoURL,\r\n            googleId: result.user.uid,\r\n          })\r\n          .then((res) => {\r\n            if (res.status === 200) {\r\n              Cookies.set(\"__tcphbl30__\", result.user.uid, { expires: 7 });\r\n              const randomNum = Math.random(5000) + 5080;\r\n              Cookies.set(\"__cuser-_webuser_\", randomNum);\r\n              Cookies.set(\"___security-data.user_\", randomNum + 8489920);\r\n              setTimeout(() => {\r\n                toast.success(\"Registered Sucessfully\");\r\n                history.push(\"/\");\r\n                window.location.reload();\r\n                setloading(false);\r\n              }, 2000);\r\n            }\r\n            if (res.status === 202) {\r\n              if (!authID) {\r\n                toast.success(\"Login Successfull\");\r\n                Cookies.set(\"__tcphbl30__\", result.user.uid, { expires: 7 });\r\n                const randomNum = Math.random(5000) + 5080;\r\n                Cookies.set(\"__cuser-_webuser_\", randomNum);\r\n                Cookies.set(\"___security-data.user_\", randomNum + 8489920);\r\n              }\r\n              setTimeout(() => {\r\n                setloading(false);\r\n                window.location.reload();\r\n                history.push(\"/\");\r\n              }, 2000);\r\n            }\r\n          });\r\n      })\r\n      .catch(function (error) {\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        //console.log(error.code);\r\n        //console.log(error.message);\r\n      });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {loading && <MainLoader />}\r\n      <Nav />\r\n      {authID ? <Redirect to=\"/\" /> : \"\"}\r\n      <div className={LoginStyle.loginWrapper}>\r\n        <div className={LoginStyle.LoginRight}>\r\n          <div className={LoginStyle.loginBox}>\r\n            <span>Login Here</span>\r\n            <img\r\n              src={`${serverBaseURI}/hariBaba/api/uploads/Images/user.png`}\r\n              alt=\"user\"\r\n            />\r\n            <button\r\n              onClick={() => {\r\n                googleSignin(provider_google);\r\n              }}\r\n              style={{ cursor: \"pointer\" }}\r\n            >\r\n              <i class=\"fab fa-google\"></i> Continue with google\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}